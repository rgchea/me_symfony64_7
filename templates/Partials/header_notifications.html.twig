
<ul class="notifications">
    <li>
        <a href="#" class="dropdown-toggle notification-icon" data-toggle="dropdown">
            <i class="fas fa-bell"></i>
            <span class="badge" id="notificationCount" >0</span>
        </a>

        <div class="dropdown-menu notification-menu">

            <div class="content">
                <ul id="notificationList" class="notificationScroll">
                </ul>

                <hr />

                {#
                <div class="text-right">
                    <a href="#" class="view-more">View All</a>
                </div>

                #}
            </div>
        </div>
    </li>
</ul>

<script type="text/javascript">


 var notificationPath = "{{ path('backend_admin_usernotification_notification_read') }}";

    var now = new Date();

    var notifications = function() {
        $.ajax({
            type:"POST",
            dataType:"json",
            url:"{{ path('backend_admin_usernotification_notification') }}",
            //data:
            success:function(data){
                //console.log(data.result);
                if(parseInt(data.result) != 0){

                    var notificationCount = 0;
                    $("#notificationList").html("");

                    myResult = data.result;
                    for(notification in myResult){

                        //console.log(myResult[notification]);
                        createdAt = new Date(myResult[notification].created_at);
                        var diff = Math.abs(now.getTime() - createdAt.getTime()) / 3600000;
                        diff = Math.round(diff);
                        if (diff <= 24) {
                            /* do something */
                            hoursAgo = "hace "+diff+ " horas";
                        }
                        else{
                            hoursAgo = "hace mÃ¡s de 24hrs";

                        }
                        //console.log(diff);

                        $("#notificationList").append('        <li>' +
                            '            <a class="clearfix" href="'+notificationPath+'?notificationID='+myResult[notification].id+'">' +
                            '                <div class="image"> <i class="fas fa-exclamation bg-warning text-light"></i> </div>' +
                            '                 <span class="title">'+myResult[notification].title+'</span>' +
                            '                 <span class="message">'+myResult[notification].description+'</span>' +
                            '                <span class="message">'+hoursAgo+'</span>' +
                            '            </a>' +
                            '        </li>');


                        notificationCount++;
                        console.log(notificationCount);
                    }
                }

                $("#notificationCount").html(notificationCount);


            }
        });

    };

    var interval = 60000;//1000 = 1 second

    setTimeout(notifications, 100);//one time
    setInterval(notifications, interval);


</script>